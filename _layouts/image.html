---
layout: default
---

{% assign telescope = site.data.telescopes | where:"uid",page.gear.telescope.ref | first %}
{% assign camera = site.data.cameras | where:"uid",page.gear.camera.ref | first %}
{% assign barlow = site.data.barlows | where:"uid",page.gear.telescope.reducer | first %}
{% assign mount = site.data.mounts | where:"uid",page.gear.mount.ref | first %}

<header class="w3-center w3-bottombar">
    <h1>{{ page.title }} {{ site.data.aliases[page.title] }}</h1>
    <h3>{{ page.date }}</h3>
</header>

<div class="w3-padding w3-row-padding w3-margin-bottom">
    <div class="w3-half">
        <table class="w3-table">
            <thead>
                <td class="w3-center w3-large">Information</td>
            </thead>
        </table>
        <table class="w3-table-all">
            <tbody>
                <tr><td><b>Primary Target</b></td><td></td><td></td></tr>
                <tr><td></td><td></td><td class="align-right">{{ page.title }}</td></tr>

                <tr><td><b>Date Taken</b></td><td></td><td></td></tr>
                <tr><td></td><td></td><td class="align-right">{{ page.date }}</td></tr>

                {% assign all_gear = site.equipment %}
                {% for gear in page.gear %}
                    {% assign ref = gear.ref %}
                    {% if ref %}
                        {% assign gear_meta = all_gear | where:"uid",ref | first %}
                        {% if gear_meta %}
                        <tr><td><b>{% if gear_meta.url %}<a href="{{site.baseurl}}{{gear_meta.url}}" target="_blank">{{ gear_meta.device | capitalize  }}<sup style="font-size: small; font-weight: normal;"><i class="icon info"></i></sup></a>{% else %}{{ gear_meta.device | capitalize  }}{% endif%}</b><td></td><td></td></td></tr>
                            {% for field in gear_meta %}
                                {% if 
                                    field == "uid" 
                                    or field == "device" 
                                    or field == "image" 
                                    or field == "collection"
                                    or field == "url"
                                    or field == "content"
                                    or field == "relative_path"
                                    or field == "excerpt"
                                    or field == "output"
                                    or field == "previous"
                                    or field == "id"
                                    or field == "date"
                                    or field == "next"
                                    or field == "path"
                                    or field == "draft"
                                    or field == "categories"
                                    or field == "layout"
                                    or field == "ext"
                                    or field == "tags"
                                    or field == "slug"
                                    or field == "title"
                                    or field == "type"
                                %}
                                {% else %}
                                <tr><td></td><td>{{ field | capitalize }}</td><td class="align-right">
                                    {% assign data = gear_meta[field] %}
                                    {% include table_data.html value=data %}
                                </td></tr>
                                {% endif %}
                            {% endfor %}
                            {% if gear.settings %}
                            {% for pair in gear.settings %}
                                <tr><td></td><td>{{ pair | first | capitalize }}</td><td class="align-right">
                                    {% assign data = pair | last %}
                                    {% include table_data.html value=data %}
                                </td></tr>
                            {% endfor %}
                            {% endif %}
                        {% endif %}
                    {% endif %}
                {% endfor %}
               
                <tr><td><b>All Targets</b></td><td></td><td></td></tr>
                {% for target in page.targets %}
                <tr><td></td><td></td><td class="align-right">{{ target }}</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="w3-half">
        {% if page.image %}
        <img class="preview w3-hover-opacity hover-pointer" src="{{ page.image }}" onclick="maximize(this)" ondragstart="return false">
        {% endif %}
        {% if page.video.youtube %}
        <div class="preview">
            <iframe src="{{ page.video.youtube.src }}" title="YouTube Video Player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>
        {% endif %}
        <div>
            {{content}}
        </div>
        <p style="text-align: right">
            {% if site.data.extern[page.title] %}
                <a class="button" target="_blank" href="{{ site.data.extern[page.title] }}">Read more about {{ page.title }} here</a>
            {% endif %}
        </p>
        <div class="w3-margin-top">
            <button class="w3-button flat" style="width: 100%;" onclick="toggle(this)">Other Photos Containing Target</button>
            <div class="expandable w3-hide">
                {% assign all_photos = site.pages | where_exp:"asset", "asset.path contains 'photos/'" %}
                <ol class="align-right" style="list-style: none">
                    {% for photo in all_photos %}
                        {% if photo.title == page.title or photo.targets contains page.title%}
                            <li><a href="{{site.baseurl}}{{photo.url}}">{{ photo.title }} {{ photo.date }}</a></li>
                        {% endif %}
                    {% endfor %}
                </ol>
            </div>
        </div>
    </div>
</div>
<div id="modal" class="w3-modal w3-hide" style="z-index: 100">
    <div class="w3-modal-content w3-display-container w3-animate-zoom w3-center w3-margin-bottom" style="width: 90%; background-color: transparent;">
        <button class="w3-display-topright w3-text-white w3-button flat" onclick="minimize()"><h1>&times;</h1></button>
        <img class="preview no-select w3-margin-bottom" src="{{ page.image }}" ondragstart="return false">
        <a href="{{ page.image }}" target="_blank" style="background-color: rgb(0, 0, 0, 0.8); padding: 8px 16px;">open image in new tab</a>
    </div>
</div>
<script>
function maximize(div) {
    var modal = document.getElementById("modal");
    modal.classList.remove("w3-hide");
    modal.classList.add("w3-show");
}
function minimize() {
    var modal = document.getElementById("modal");
    modal.classList.remove("w3-show");
    modal.classList.add("w3-hide");
    console.log(modal);
}

function toggle(elem) {
    var list = elem.parentElement.getElementsByClassName("expandable");
    if (!list)
        return;
    if (list.length < 1)
        return;
    toHide = list[0];
    console.log(toHide)
    if (toHide) {
        if (toHide.classList.contains("w3-hide")) {
            toHide.classList.remove("w3-hide");
            toHide.classList.add("w3-show"); 
        } else {
            toHide.classList.remove("w3-show");
            toHide.classList.add("w3-hide");
        }
    }
}
</script>